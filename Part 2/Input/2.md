# Mathematical models for job-shop scheduling problems with routing and process plan flexibility

# 2. Description of the problems

FJSP consists of a set of  $n$  independent jobs  $J = \{j_{i}\}_{i=1}^{n}$ , each having its own processing order through a set of  $m$  machines  $M = \{m_{k}\}_{k=1}^{m}$ . A number of  $\ell_{i}$  ordered operations  $(O_{i1},\ldots,O_{i(\mathrm{j})})$  has to be performed to complete job  $i$ . Operation  $j$  of job  $i$  ( $O_{ij}$ ), rather than having to be processed on a predefined machine  $m_{j} \in M$  as in JSP, can be processed by any machine in a given set  $M_{j} \subseteq M$  for a given processing time  $t_{ijk}$ . The FJSP can be considered as consisting of many unique JSPs because of the routing flexibility. For example, for a five-job three machine scheduling problem in which each job has four operations to be processed and each operation can be processed by any two of the three machines, the FJSP can be viewed as a set of  $2^{20}$  JSPs [14]. While JSP consists of only a sequencing problem because the assignment of operations to the machines is given in advance, the FJSP turns into a routing as well as a sequencing problem: assigning each operation  $O_{ij}$  to a machine selected from the set  $M_{j}$  and ordering operations on the machines so that  $C_{\max}$  is minimized.

The following assumptions are made for FJSPs: the processing times are known and fixed. The setup times are either negligible or included in the processing times. Transportation times are ignored. All jobs are available at time zero. No pre-emption is allowed, and a machine can process only one operation at a time. There is only one feasible process plan for each job.

The FJSP-PPF considers multiple process plans for jobs by excluding the final assumption of FJSP. The problem consists of a set of  $n$  jobs, each having a set of  $\tau_{(i)}$  process plans  $P_{i} = \{\rho_{ip_{(i)}}\}_{p_{(i)} = 1}^{\tau_{(i)}}$ . The process plan  $p_{(i)}$  of job  $i$  is an ordered list of  $\ell_{ip_{(i)}}$  operations. It is assumed that the process plans are known in advance and represented by linear precedence relationships. Operation  $j$  in the process plan  $p_{(i)}$  of job  $i$  ( $O_{ip_{(i)}j}$ ) can be processed by any machine in a given set  $M_{j} \subseteq M$  for a given processing time  $t_{ip_{(i)}jk}$ . Because only one of the alternative plans is to be adopted for each job, the FJSP-PPF deals with not only routing and sequencing sub-problems but also the process plan selection sub-problem: choosing a process plan for each job  $i$  from a given set of  $P_{(i)}$ , assigning each operation  $O_{ip_{(i)}j}$  to a machine selected from the set  $M_{j}$  and ordering operations on the machines so that  $C_{\mathrm{max}}$  is minimized.

# 3. MILP-1 model for FJSP

There are three different definitions for binary variables in the integer programming formulation of scheduling problems [29]:

$\gamma_{irk} = 1$ , if job  $i$  is scheduled in the  $r$ th position for processing on machine  $k$ ; 0, otherwise.

$\gamma_{ikt} = 1$  , if job  $i$  is processed by machine  $k$  during period t; 0 otherwise.

$\gamma_{i i^{\prime}k} = 1$  , if job  $i$  precedes job  $i^{\prime}$  (not necessarily immediately) on machine  $k$  ; 0 otherwise.

These three definitions were first proposed by Wagner [36], Bowman [37], and Manne [35], respectively, and they are used mainly to formulate JSPs. The following mixed-integer programming formulation of the FJSP adopts the modelling approach of Manne [35].

# 3.1. Presentation of the model

The following notation is used for the formulation of MILP-1.

Indices and sets  

<table><tr><td>i</td><td>jobs (i,i&#x27; ∈ J)</td></tr><tr><td>j</td><td>operations (j,j&#x27; ∈ O)</td></tr><tr><td>k</td><td>machines (k ∈ M)</td></tr><tr><td>J</td><td>the set of jobs</td></tr><tr><td>M</td><td>the set of machines</td></tr><tr><td>O</td><td>the set of operations</td></tr><tr><td>Oi</td><td>ordered set of operations of job i (Oi ⊆ O), where Oif(i) is the first and Oiε(i) is the last element of Oi</td></tr><tr><td>Mj</td><td>the set of alternative machines on which operation j can be processed, (Mj ⊆ M)</td></tr><tr><td>Mj∩Mj&#x27;</td><td>the set of machines on which operations j and j&#x27; can be processed</td></tr><tr><td>Parameters</td><td></td></tr><tr><td>tijk</td><td>the processing time of operation Oij on machine k</td></tr><tr><td>L</td><td>a large number</td></tr><tr><td>Decision variables</td><td></td></tr><tr><td>Xijk</td><td>1, if machine k is selected for operation Oij; 0, otherwise</td></tr><tr><td>Sijk</td><td>the starting time of operation Oij on machine k</td></tr><tr><td>Cijk</td><td>the completion time of operation Oij on machine k</td></tr><tr><td>Yiji&#x27;j&#x27;k</td><td>1, if operation Oij precedes operation Oij&#x27; on machine k; 0, otherwise</td></tr><tr><td>Ci</td><td>the completion time of job i</td></tr><tr><td>Cmax</td><td>maximum completion time over all jobs (makespan)</td></tr></table>

The proposed mathematical model is defined as follows:

Objective function: Minimize  $C_{\mathrm{max}}$

Constraints:

$$
\sum_ {k \in M _ {j}} X _ {i j k} = 1 \quad \forall i \in J, \forall j \in O _ {i}, \tag {1}
$$

$$
S _ {i j k} + C _ {i j k} \leqslant \left(X _ {i j k}\right) \cdot L \quad \forall i \in J, \forall j \in O _ {i}, \forall k \in M _ {j}, \tag {2}
$$

$$
C _ {i j k} \geqslant S _ {i j k} + t _ {i j k} - (1 - X _ {i j k}) \cdot L \quad \forall i \in J, \forall j \in O _ {i}, \forall k \in M _ {j}, \tag {3}
$$

$$
S _ {i j k} \geqslant C _ {i ^ {\prime} j ^ {\prime} k} - \left(Y _ {i j i ^ {\prime} j ^ {\prime} k}\right) \cdot L \quad \forall i <   i ^ {\prime}, \forall j \in O _ {i}, \forall j ^ {\prime} \in O _ {i ^ {\prime}}, \forall k \in M _ {j} \cap M _ {j ^ {\prime}}, \tag {4}
$$

$$
S _ {i ^ {\prime} j ^ {\prime} k} \geqslant C _ {i j k} - \left(1 - Y _ {i j i ^ {\prime} j ^ {\prime} k}\right) \cdot L \quad \forall i <   i ^ {\prime}, \forall j \in O _ {i}, \forall j ^ {\prime} \in O _ {i ^ {\prime}}, \forall k \in M _ {j} \cap M _ {j ^ {\prime}}, \tag {5}
$$

$$
\sum_ {k \in M _ {j}} S _ {i j k} \geqslant \sum_ {k \in M _ {j}} C _ {i, j - 1, k} \quad \forall i \in J, \forall j \in O _ {i} - \left\{O _ {i f _ {(i)}} \right\}, \tag {6}
$$

$$
C _ {i} \geqslant \sum_ {k \in M _ {j}} C _ {i, O _ {i _ {i (i)}}, k} \quad \forall i \in J, \tag {7}
$$

$$
C _ {\max } \geqslant C _ {i} \quad \forall i \in J, \tag {8}
$$

and

$$
X _ {i j k} \in \{0, 1 \} \quad \forall i \in j, \forall j \in O _ {i}, \forall k \in M _ {j},
$$

$$
S _ {i j k} \geqslant 0 \quad \forall i \in j, \forall j \in O _ {i}, \forall k \in M _ {j},
$$

$$
C _ {i j k} \geqslant 0 \quad \forall i \in j, \forall j \in O _ {i}, \forall k \in M _ {j},
$$

$$
Y _ {i j ^ {\prime} i ^ {\prime} m} \in \{0, 1 \} \quad \forall i <   i ^ {\prime}, \forall j \in O _ {i}, \forall j ^ {\prime} \in O _ {i ^ {\prime}}, \forall k \in M _ {j} \cap M _ {j ^ {\prime}},
$$

$$
C _ {i} \geqslant 0 \quad \forall i \in j.
$$

Constraints (1) make sure that operation  $O_{ij}$  is assigned to only one machine. If operation  $O_{ij}$  is not assigned to machine  $k$ , the constraints (2) set the starting and completion times of it on machine  $k$  equal to zero. Otherwise, the constraints (3) guarantee that the difference between the starting and the completion times is equal in the least to the processing time on machine  $k$ . Constraints (4) and (5) take care of the requirement that operation  $O_{ij}$  and operation  $O_{i'j'}$  cannot be done at the same time on any machine in the set  $M_j \cap M_{j'}$ . Constraints (6) ensure that the precedence relationships between the operations of a job are not violated, i.e. the operation  $O_{ij}$  is not started before the operation  $O_{i,j-1}$  has been completed. Constraints (7) determine the completion times (of the final operations) of the jobs, and constraints (8) determine the makespan.
